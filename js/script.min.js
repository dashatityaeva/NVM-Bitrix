$(document).ready(function(){$(".header__burger").click(function(){$(".header").toggleClass("menu-active"),$("body").toggleClass("hidden")}),$("#estate-carousel").slick({dots:!0}),$("#bonus-carousel").slick({dots:!0,fade:!0,speed:500,cssEase:"linear"}),$("#location-carousel").slick({dots:!0,slidesToShow:2,slidesToScroll:2}),$("#projects-carousel").slick({dots:!0}),$("#constituents-carousel").slick({dots:!0,slidesToShow:4,responsive:[{breakpoint:971,settings:{slidesToShow:3}},{breakpoint:791,settings:{arrows:!1,slidesToShow:2}},{breakpoint:500,settings:{arrows:!1,slidesToShow:1}}]}),$(".footer__scroll-wrap").on("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:0},"300")}),$('input[type="tel"]').length&&$('input[type="tel"]').mask("+7 (999) 999-99-99"),$("#excursion-form")&&$("#excursion-form").validate({rules:{name:{required:!0,minlength:2},phone:{required:!0,minlength:10}},messages:{name:{required:"",minlength:""},phone:{required:"",minlength:""}},errorClass:"invalid"}),$(".project-details__link").magnificPopup({type:"image",gallery:{enabled:!0},removalDelay:100,mainClass:"mfp-with-zoom",zoom:{enabled:!0,duration:300,easing:"ease-in-out",opener:function(e){return e.is("img")?e:e.find("img")}}}),$(".popap-registration").magnificPopup(),$(".popap-thanks").magnificPopup(),$(".popap-ceo").magnificPopup(),$(".plan__dot").each(function(){$(this).magnificPopup()}),$(function(){$("#datepicker").datepicker({firstDay:1,dayNamesMin:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],minDate:new Date})}),$("#datepicker").change(function(){console.log($("#datepicker").val())})});let projects=document.querySelector(".projects"),projectsTitle=document.querySelector(".projects__titl");window.addEventListener("scroll",function(){if(projects){let e=projects.offsetHeight+projects.offsetTop-335;window.pageYOffset>=e?projectsTitle.classList.add("projects__titl_stop"):projectsTitle.classList.remove("projects__titl_stop")}});let blockMap=document.querySelector(".contacts-map");function init(){var e=new ymaps.Map("contacts-map",{center:[55.76,37.64],zoom:12,controls:["geolocationControl","fullscreenControl","zoomControl","smallMapDefaultSet"]},{geolocationControlFloat:"right",zoomControlSize:"small"});e.geoObjects.options.set({iconLayout:"default#image",iconImageHref:"../img/svgSprite/point.svg",iconImageSize:[56,67],iconImageOffset:[-28,-67]});let t=new ymaps.Placemark([55.78,37.64],{hintContent:"Это хинт2",balloonContent:"Это балун2"});e.geoObjects.add(t),e.behaviors.disable(["scrollZoom"])}function asyncCSS(e){setTimeout(()=>{let t=document.createElement("link");t.rel="stylesheet",t.href=e,document.head.appendChild(t),console.log("2sec")},2e3)}blockMap&&console.log(have),document.addEventListener("DOMContentLoaded",function(){let e=[].slice.call(document.querySelectorAll("img.lazy, iframe.lazy"));console.log("lazyImages: ",e);let t=!1;const o=function(){!1===t&&(t=!0,setTimeout(function(){e.forEach(function(t){t.getBoundingClientRect().top<=window.innerHeight&&t.getBoundingClientRect().bottom>=0&&"none"!==getComputedStyle(t).display&&(t.src=t.dataset.src,t.classList.remove("lazy"),0===(e=e.filter(function(e){return e!==t})).length&&(document.removeEventListener("scroll",o),window.removeEventListener("resize",o),window.removeEventListener("orientationchange",o)))}),t=!1},200))};document.addEventListener("scroll",o),window.addEventListener("resize",o),window.addEventListener("orientationchange",o)}),asyncCSS("https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css");let planDotsClose,plan=document.querySelector("#img-plan"),planDots=document.querySelectorAll(".plan__dot"),inputCheck=document.querySelector(".plan__inp-check"),dotsCoords={},id=1,identifyCoords=function(e){let t=e.target.offsetWidth,o=e.target.offsetHeight,n=e.offsetX/(t/100),s=e.offsetY/(o/100);return recordCoords(id,n,s),[n,s,id]},recordCoords=function(e,t,o){dotsCoords[e]=[t,o],id++},pathMackImg="img/svgSprite/point.svg",addMarkOnPlan=function([e,t,o],n){plan.insertAdjacentHTML("beforeend",`\n    <a href="#estate${o}" class="plan__dot dot1" style="left: ${e-3}%; top: ${t-10}%;">\n        <div class="plan__dot-close plan__dot-close_visible" title="Удалить метку"></div>\n        <img src="${pathMackImg}" alt="Метка на плане">\n    </a>\n    <div class="mfp-hide thanks" id="estate${o}">\n        <div class="thanks__img-wrap">\n            <img class="thanks__img" src="img/unnamed.jpg" alt="" >\n        </div>\n        <div class="thanks__content">\n            <p>${n}</p>\n        </div>\n    </div>\n`)};function createMark(e){if(e.target.classList.contains("plan__img")){let t=prompt("Введите контент будущей метки:");t.length||(t="Ничего не было введено"),addMarkOnPlan(identifyCoords(e),t)}$(".plan__dot").magnificPopup({disableOn:function(){return $(".plan__dot-close").click(function(){return!1}),!0}}),deleteMark()}let checkClose=function(e){planDotsClose=document.querySelectorAll(".plan__dot-close"),!0===e?planDotsClose.forEach(e=>{e.classList.contains("plan__dot-close_visible")||e.classList.add("plan__dot-close_visible")}):planDotsClose.forEach(e=>{e.classList.contains("plan__dot-close_visible")&&e.classList.remove("plan__dot-close_visible")})},deleteMark=function(){(planDotsClose=document.querySelectorAll(".plan__dot-close")).forEach(e=>{e.addEventListener("click",function(){e.closest(".plan__dot").remove()})})};inputCheck.addEventListener("change",()=>{inputCheck.checked?(plan.addEventListener("click",createMark),checkClose(!0)):(plan.removeEventListener("click",createMark,!1),checkClose(!1))});